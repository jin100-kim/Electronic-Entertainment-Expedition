# AGENTS.md (전자오락원정대 / My project)

## 작업 방식
- 대화/출력은 한국어.
- 유니티 프로젝트 경로: `E:\전자오락원정대\My project`.
- 코드 변경은 간결하게, 필요한 파일만 수정.
- 빌드 산출물도 Git에 포함(사용자 요청 사항).
- GameSession은 실행 시 코드 기본값으로 강제 덮어쓰기(인스펙터 값 무시).

## 현재 게임 핵심 요약
- 장르: 뱀파이어 서바이버류 멀티/로컬 2D.
- 자동 공격 + 업그레이드 + 적 스폰 + 경험치/코인 획득.

## 무기 목록 (10개)
- 총, 부메랑, 노바, 샷건, 레이저, 체인 라이트닝, 번개, 드론, 수리검, 빙결 구체
- 무기/스탯 업그레이드 최대 레벨: 10

## 업그레이드 룰
- 무기/스탯 슬롯 제한 존재 (GameSession에서 설정):
  - `maxWeaponSlots`, `maxStatSlots`
- 현재 슬롯: 무기 5, 스탯 5.
- 슬롯이 가득 찼으면 신규 아이템은 업그레이드 선택지에 안 뜸.
- 모든 업그레이드 완료 시: "HP 회복 (20%)", "코인 +10" 등장.
- 레벨업 선택창: 5칸 (4개 선택 + 리롤 1회).
- 레벨업 선택창 단축키: 숫자/넘버키 1~4 선택, 5는 리롤.

## 스탯 업그레이드 (10종)
- 공격력, 공격속도, 이동속도, 체력 강화, 사거리, 경험치 획득
- 경험치 자석, 투사체 크기, 투사체 수, 관통
- 경험치 획득은 획득량만 증가, 자석 효과는 분리됨.
- 경험치 자석 기본값: 범위 1.5, 속도 1.5. 레벨당 +1.

## UI 레이아웃 (요구사항 기반)
- 상단 전체 폭 XP 바 + 레벨 텍스트.
- 시간은 XP 바 아래 중앙, MM:SS.
- 우상단: 처치 수/코인 수 텍스트.
- 좌상단: 업그레이드 아이콘 2줄 (위 무기, 아래 스탯, 레벨 표기).
- 미니맵: 우하단.
- 미니맵에 현재 카메라 화면 범위 사각형 표시.
- 오토플레이 토글: 좌하단.
- 상단 HUD는 UGUI로 전환(빌드에서 텍스트 잘림 완화).
- 시작 선택/레벨업 선택/게임오버/오토플레이 UI도 UGUI 전환.
- 미니맵 UGUI 렌더링 적용(온스크린 텍스처 방식).
- 시작 캐릭터 선택창에서 마우스오버 시 캐릭터가 선명하게 표시.
- 시작 선택 캐릭터 프리뷰 2배율, 인게임 플레이어 비주얼 스케일 2.5배율.
- 시작 선택 타이틀은 패널 밖 상단에 배치, 프리뷰는 버튼 영역 위로 정렬.
- 시작 선택창: 캐릭터 프리뷰/텍스트 모두 버튼 네모 안쪽 배치.
- 마우스오버 시 선택 박스 강조(시작 선택/업그레이드 공통).
- 시작/업그레이드 선택 시 클릭 효과(약 0.3초): 테두리 + 밝기 플래시 후 적용/닫힘.
- 시작 선택 캐릭터 프리뷰는 기본 밝게 표시(흐림 제거).
- 시작 선택 프리뷰 위치 보정값(startPreviewYOffset) 추가.
- 플레이어 그림자 오프셋 하향 조정.

## 코인 시스템
- 적 처치 시 낮은 확률로 코인 드랍.
- XP 자석(Experience)의 범위/속도에 끌림.
- 코인 획득량은 게임 오버 후에도 유지 (PlayerPrefs 사용).

## 주요 스크립트
- `GameSession.cs`: 게임 플로우/업그레이드/스폰/코인/리롤/오토플레이/시작 선택
- `AutoAttack.cs`: 무기별 공격
- `EnemyController.cs`: 적 이동/피해/사망/드랍
- `Experience.cs`, `ExperiencePickup.cs`: 경험치 및 자석
- `CoinPickup.cs`: 코인 픽업
- `GameHUD.cs`: 상단 UI/아이콘/킬·코인 표시
- `Minimap.cs`: 미니맵

## 아트/애니메이션
- 에셋 위치: `Assets/Art/...`
- 애니메이션 자동 생성 결과: `Assets/Art/Generated/Animations/...`
- 플레이어/몬스터는 Animator 기반으로 전환 중.

## 성능/안정성
- 원형 스프라이트는 크기별 캐시 사용(투사체/XP/코인 생성 시 텍스처 중복 생성 방지).
- 경험치 필요치가 0 이하일 때 무한 레벨업 루프 방지.
- 적/투사체/픽업은 활성 리스트 캐시 사용(FindObjectsOfType 제거).
- 투사체/XP/코인은 풀링 사용(Instantiate/Destroy 스파이크 감소).
- 자동 공격 타깃 탐색은 0.1초 간격으로 갱신.
- 레벨업 선택 중에는 자석(경험치/코인)이 정지.

## 다음 작업 후보
- 업그레이드/코인 아이콘을 실제 스프라이트로 교체
- 레벨업 선택창 디자인 개선
- 무기별 시각 효과/이펙트 강화
- 몬스터 스폰 밸런스/곡선 정리
